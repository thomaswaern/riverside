"use strict";var app;$(function(){$("a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var a=$(this.hash);if(a=a.length?a:$("[name="+this.hash.slice(1)+"]"),a.length){switch(console.log(this.hash.slice(1)),this.hash.slice(1)){case"audio":"audio"!==app.currentPage&&app.prepare();break;case"video":app.stopAllSounds(),$(".slider").val(24,!0);break;case"contact":app.stopAllSounds(),$(".slider").val(24,!0)}return $("html,body").animate({scrollTop:a.offset().top},500),!1}}}),Draggable.create(".ring",{type:"rotation",throwProps:!0})});var App=function(a){var b,c={crackling:new Audio("../sounds/needle.ogg"),end:new Audio("../sounds/endloop.ogg")},d=[],e=0,f=0,g=0;return{getCurrentTrack:function(){return d[f]},setCurrentTrack:function(a){f=a},setTracks:function(a){d=a,e=0,d.forEach(function(a){e+=a.duration}),this.setLabel()},setLabel:function(){var b="",c=1;d.forEach(function(a){b+="<br>",b+=c++ +". ",b+=a.title.substr(0,a.title.indexOf(" -"))}),a(".record").find(".title").html(b)},onPosition:function(){var a=g+b.position;this.setArmRotation(a/e)},setArmRotation:function(b){var c=51*(1-b);a(".slider").val(c+24,!0)},prepare:function(){a(".slider").noUiSlider({start:24,handles:1,range:{min:24,max:75}}),a(".slider").change(function(b){console.log("change"),app.armMoving=!1,app.setPosition(a(b.target).val(),24,75)}),a(".slider").on({slide:function(){app.armMoving=!0,console.log("moving"),a(".arm").css("-webkit-animation","none"),a(".arm").css("-webkit-transform","rotate(-"+a(".slider").val()+"deg)"),a(".slider").css("-webkit-transform","rotate(-"+a(".slider").val()/3+"deg)")},set:function(){console.log("set"),a(".arm").css("-webkit-transform","rotate(-"+a(".slider").val()+"deg)")}}),a(".arm").css("-webkit-animation","wobblearm 4.3s infinite"),a(".record").css("-webkit-animation","rotating 4.3s linear infinite"),this.playSoundEffect("end",!0)},setPosition:function(a,c,h){var i,j=1-(a-c)/(h-c),k=e*j,l=0,m=0,n=!1;d.forEach(function(a){n||(l+=a.duration,l>k?(i=k-(l-a.duration),g=l-a.duration,n=!0):m++)}),b&&b.playState>0&&f===m?b.setPosition(i):(f=m,this.playCurrentTrack(i))},next:function(){g+=d[f].duration;try{b.stop()}catch(a){}f>=d.length-1||(f++,this.playCurrentTrack(0))},playCurrentTrack:function(a){try{b.stop()}catch(c){}this.getCurrentTrack()&&"undefined"!==this.getCurrentTrack()&&SC.stream("/tracks/"+this.getCurrentTrack().id,{whileplaying:function(){!app.armMoving&&b.loaded&&this.onPosition()}.bind(this),autoLoad:!0},function(c){b=c,this.playSoundEffect("crackling",!1),b.setVolume(0),b.play({onload:function(){b.setVolume(90),b.setPosition(a)},onfinish:function(){app.next()}})}.bind(this))},playSoundEffect:function(a,b){c[a].loop=b,c[a].play()},stopAllSounds:function(){for(var a in c)c[a].pause();try{b.stop()}catch(d){}},initSoundcloud:this.initSoundcloud}};app=new App(jQuery),SC.whenStreamingReady(function(){setTimeout(function(){SC.get("/playlists/2373914",function(a){app.setTracks(a.tracks),app.prepare()}.bind(this))}.bind(this),2200)});